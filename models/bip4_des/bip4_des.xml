<mujoco model="bip4_des">
  <compiler angle="radian" meshdir="meshes/"/>
    <option timestep="0.001"  tolerance="1e-10" solver="Newton" jacobian="dense" cone="pyramidal" gravity="0 0 -9.81">  <!--integrator="RK4"  iteration="50"-->
        <flag contact="enable" energy="enable"/>
    </option>
    <size njmax="500" nconmax="1000" /> 

    <default>
        <light castshadow="false" />
        <geom rgba="0.784 0.784 0.784 1"/>
        <default class="visual">
            <geom contype="0" conaffinity="0" group="1" type="mesh" euler="1.57 0 0" />
        </default>
        <default class="collision">    <!-- 定义一个名为 collision 的默认类，适用于碰撞的几何体 -->
            <geom contype="1" conaffinity="1" friction="1.0 0.3 0.3" 
                margin="0.001" group="0" euler="1.57 0 0" />   <!-- 几何体启用碰撞检测，指定摩擦系数（1.0, 0.3, 0.3），设置 margin 和欧拉角旋转 -->
        </default>
        <joint damping="0.1" frictionloss="2" armature="0.01"/>  <!--damping="0.1" 设置关节的阻尼，帮助缓解关节运动中的震荡；frictionloss="0.02" 定义了关节的摩擦损失，表示关节在运动时的能量损失；armature="0.01" 设置关节的转动惯量，这对运动稳定性有影响。-->
    </default>

  <asset>
    <mesh name="base_link" file="base_link.STL"/>
    <mesh name="l_hip_roll_Link" file="l_hip_roll_Link.STL"/>
    <mesh name="l_hip_yaw_Link" file="l_hip_yaw_Link.STL"/>
    <mesh name="l_hip_pitch_Link" file="l_hip_pitch_Link.STL"/>
    <mesh name="l_knee_Link" file="l_knee_Link.STL"/>
    <mesh name="l_ankle_Link" file="l_ankle_Link.STL"/>
    <mesh name="r_hip_roll_Link" file="r_hip_roll_Link.STL"/>
    <mesh name="r_hip_yaw_Link" file="r_hip_yaw_Link.STL"/>
    <mesh name="r_hip_pitch_Link" file="r_hip_pitch_Link.STL"/>
    <mesh name="r_knee_Link" file="r_knee_Link.STL"/>
    <mesh name="r_ankle_Link" file="r_ankle_Link.STL"/>
    <mesh name="body_Link" file="body_Link.STL"/>    
  </asset>

  <worldbody>
    <body name="base_link" pos="0 0 0.95">
      <freejoint name="float_base" />
      <inertial  pos="-0.066232 -2.7147e-06 0.00036919" mass="5.5946" fullinertia="0.0047064 0.0046558 0.0053372 -1.0516e-06 -1.6682e-05 3.4671e-06" />
      <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="base_link"/>
      <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="base_link"/>
      <site name="imu" quat="1 0 0 0"/>
      
      <!-- <body name="body_Link" pos="0 0 0.048">
        <inertial pos="-0.020522 5.744e-05 0.13547" quat="1 -0.000207194 0.000583518 9.61619e-06" mass="13.408" diaginertia="0.061764 0.045091 0.032291"/>
        <joint name="J_waist_yaw" pos="0 0 0" axis="0 0 1" range="-1.57 1.57"/>
        <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="body_Link"/>
        <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="body_Link"/>
      </body> -->
      <body name="l_hip_roll_Link" pos="0 0.085 0">
        <inertial pos="0.007702 8.0599e-05 -0.0041394" quat="0.505729 0.488722 0.525523 0.478764" mass="1.8362" diaginertia="0.00147783 0.0013744 0.00135147"/>
        <joint name="J_hip_l_roll" pos="0 0 0" axis="1 0 0" range="-0.05 1"/>
        <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_roll_Link"/>
        <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_roll_Link"/>
        <body name="l_hip_yaw_Link" pos="0.00755 0 -0.041">
          <inertial pos="0 0.0047249 -0.032157" quat="0.802552 0.596583 0 0" mass="0.18597" diaginertia="0.00054536 0.000472854 0.000270996"/>
          <joint name="J_hip_l_yaw" pos="0 0 0" axis="0 0 1" range="-0.8 0.8"/>
          <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_yaw_Link"/>
          <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_yaw_Link"/>
          <body name="l_hip_pitch_Link" pos="0 0 -0.071">
            <inertial pos="0.00016671 0.0072394 -0.066453" quat="0.706583 -0.000903732 -0.000310299 0.70763" mass="10.605" diaginertia="0.017107 0.013974 0.011931"/>
            <joint name="J_hip_l_pitch" pos="0 0 0" axis="0 1 0" range="-1.5 1.5"/>
            <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_pitch_Link"/>
            <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="l_hip_pitch_Link"/>
            <body name="l_knee_Link" pos="0 0 -0.3">
              <inertial pos="-0.0080643 0.0026112 -0.13064" quat="0.998656 0.00217086 0.037637 0.0355779" mass="3.4252" diaginertia="0.00683163 0.00678216 0.00255211"/>
              <joint name="J_knee_l_pitch" pos="0 0 0" axis="0 1 0" range="0 1.7"/>
              <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="l_knee_Link"/>
              <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="l_knee_Link"/>
              <body name="l_ankle_Link" pos="0 0 -0.4">
                <inertial pos="0.025627 0.002347 -0.031389" quat="0.000916149 0.733572 0.00261234 0.679606" mass="0.3255" diaginertia="0.000696033 0.000678273 6.97842e-05"/>
                <joint name="J_ankle_l_pitch" pos="0 0 0" axis="0 1 0" range="-0.6 0.6"/>
                <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="l_ankle_Link"/>
                <!-- <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="l_ankle_Link"/> -->
                <!-- <geom type="box" rgba="0.75294 0.75294 0.75294 1"  mesh="l_ankle_Link"/> -->
                <!-- <geom type="box" rgba="1 0 0 0" pos="0.04750461363863139 8.266688098764184e-05 -0.02654531035541249" size="0.1225  0.0400  0.0435 "  /> -->
                <geom type="box" pos="0.04749999940395355 0.0012208642475975968 -0.02722398766749333" rgba="1 0 0 0"  size="0.1225 0.0402  0.0442 "/>

                <site name="lf-tc" type="box" size="0.123 0.041  0.045"  pos="0.04749999940395355 0.0012208642475975968 -0.02722398766749333"  rgba="0 1 0 0" />             
              </body>
            </body>
          </body>
        </body>
      </body>
      <body name="r_hip_roll_Link" pos="0 -0.085 0">
        <inertial pos="0.007702 8.0599e-05 -0.0041394" quat="0.505729 0.488722 0.525523 0.478764" mass="1.8362" diaginertia="0.00147783 0.0013744 0.00135147"/>
        <joint name="J_hip_r_roll" pos="0 0 0" axis="1 0 0" range="-1 0.05"/>
        <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_roll_Link"/>
        <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_roll_Link"/>
        <body name="r_hip_yaw_Link" pos="0.00755 0 -0.041">
          <inertial pos="0 -0.0047249 -0.032157" quat="0.596583 0.802552 0 0" mass="0.18597" diaginertia="0.00054536 0.000472854 0.000270996"/>
          <joint name="J_hip_r_yaw" pos="0 0 0" axis="0 0 1" range="-0.8 0.8"/>
          <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_yaw_Link"/>
          <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_yaw_Link"/>
          <body name="r_hip_pitch_Link" pos="0 0 -0.071">
            <inertial pos="0.00017061 -0.0072483 -0.066599" quat="0.706752 -0.00320388 -0.00270438 0.707449" mass="10.607" diaginertia="0.017107 0.0139941 0.0119109"/>
            <joint name="J_hip_r_pitch" pos="0 0 0" axis="0 1 0" range="-1.5 1.5"/>
            <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_pitch_Link"/>
            <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="r_hip_pitch_Link"/>
            <body name="r_knee_Link" pos="0 0 -0.3">
              <inertial pos="-0.0080643 -0.0011888 -0.13064" quat="0.998656 0.00217086 0.037637 0.0355779" mass="3.4252" diaginertia="0.00683163 0.00678216 0.00255211"/>
              <joint name="J_knee_r_pitch" pos="0 0 0" axis="0 1 0" range="0 1.7"/>
              <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="r_knee_Link"/>
              <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="r_knee_Link"/>
              <body name="r_ankle_Link" pos="0 0 -0.4">
                <inertial pos="0.025627 -0.001453 -0.031389" quat="0.000916149 0.733572 0.00261234 0.679606" mass="0.3255" diaginertia="0.000696033 0.000678273 6.97842e-05"/>
                <joint name="J_ankle_r_pitch" pos="0 0 0" axis="0 1 0" range="-0.6 0.6"/>
                <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="r_ankle_Link"/>
                <!-- <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="r_ankle_Link"/> -->
                <geom type="box" rgba="1 0 0 0" pos="0.04750461363863139 8.266688098764184e-05 -0.02654531035541249" size="0.1225  0.0400  0.0435 "  />
                <site name="rf-tc" type="box" size="0.123  0.041   0.044" pos="0.04750461363863139 8.266688098764184e-05 -0.02654531035541249" rgba="0 1 0 0" />
              </body>
            </body>
          </body>
        </body>
      </body>
    
      <body name="body_Link" pos="0 0 0.048">
        <inertial pos="-0.020522 5.744e-05 0.13547" quat="1 -0.000207194 0.000583518 9.61619e-06" mass="13.408" diaginertia="0.061764 0.045091 0.032291"/>
        <joint name="J_waist_yaw" pos="0 0 0" axis="0 0 1" range="-1.57 1.57"/>
        <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.75294 0.75294 0.75294 1" mesh="body_Link"/>
        <geom type="mesh" rgba="0.75294 0.75294 0.75294 1" mesh="body_Link"/>
      </body>
    </body>
  </worldbody>

  <actuator> <!--定义了机器人的执行器，包括电机，用于控制关节的运动/--> 

      <motor name="M_hip_l_roll"  joint="J_hip_l_roll" gear="1" ctrllimited="true" ctrlrange="-112 112"/>
      <motor name="M_hip_l_yaw"  joint="J_hip_l_yaw" gear="1" ctrllimited="true" ctrlrange="-70 70"/>
      <motor name="M_hip_l_pitch" joint="J_hip_l_pitch" gear="1" ctrllimited="true" ctrlrange="-395 395"/>
      <motor name="M_knee_l_pitch"  joint="J_knee_l_pitch" gear="1" ctrllimited="true" ctrlrange="-395 395"/>
      <motor name="M_ankle_l_pitch"  joint="J_ankle_l_pitch" gear="1" ctrllimited="true" ctrlrange="-112 112"/>

      <motor name="M_hip_r_roll"  joint="J_hip_r_roll" gear="1" ctrllimited="true" ctrlrange="-112 112"/>
      <motor name="M_hip_r_yaw"  joint="J_hip_r_yaw" gear="1" ctrllimited="true" ctrlrange="-70 70"/>
      <motor name="M_hip_r_pitch"  joint="J_hip_r_pitch" gear="1" ctrllimited="true" ctrlrange="-395 395"/>
      <motor name="M_knee_r_pitch"  joint="J_knee_r_pitch" gear="1" ctrllimited="true" ctrlrange="-395 395"/>
      <motor name="M_ankle_r_pitch"  joint="J_ankle_r_pitch" gear="1" ctrllimited="true" ctrlrange="-112 112"/>

      <motor name="M_waist_yaw"  joint="J_waist_yaw" gear="1" ctrllimited="true" ctrlrange="-191 191"/>  
 
  </actuator>  

  <contact>
      <exclude name="ex_baselink_body_Link" body1="base_link" body2="body_Link" />

      <exclude name="ex_baselink_right-leg" body1="base_link" body2="l_hip_roll_Link" />
      <exclude name="ex_right-leg_r-hip" body1="l_hip_roll_Link" body2="l_hip_yaw_Link" />  
      <exclude name="ex_r-hip_r-thigh" body1="l_hip_yaw_Link" body2="l_hip_pitch_Link" />  
      <exclude name="ex_r-thigh_r-shank" body1="l_hip_pitch_Link" body2="l_knee_Link" />  
      <exclude name="ex_r-shank_r-foot" body1="l_knee_Link" body2="l_ankle_Link" />        
      
      <exclude name="ex_baselink_lift-leg" body1="base_link" body2="r_hip_roll_Link" />
      <exclude name="ex_left-leg_l-hip" body1="r_hip_roll_Link" body2="r_hip_yaw_Link" />
      <exclude name="ex_l-hip_l-thigh" body1="r_hip_yaw_Link" body2="r_hip_pitch_Link" />
      <exclude name="ex_l-thigh_l-shank" body1="r_hip_pitch_Link" body2="r_knee_Link" />  
      <exclude name="ex_l-shank_l-foot" body1="r_knee_Link" body2="r_ankle_Link" />           

      <exclude name="ex_baselink_r-hip" body1="base_link" body2="l_hip_yaw_Link" />
      <exclude name="ex_baselink_l-hip" body1="base_link" body2="r_hip_yaw_Link" />

  </contact>

  <sensor>
      <framequat name="baselink-quat" objtype="site" objname="imu" />
      <velocimeter name="baselink-velocity" site="imu" />
      <gyro name="baselink-gyro" site="imu" />
      <accelerometer name="baselink-baseAcc" site="imu" />
      <touch name="lf-touch" site="lf-tc" />
      <touch name="rf-touch" site="rf-tc" />
  </sensor>  

</mujoco>
